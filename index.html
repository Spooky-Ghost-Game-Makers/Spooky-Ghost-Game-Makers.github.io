<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Spooky Ghost Game (PyScript)</title>
  <script defer src="https://pyscript.net/latest/pyscript.js"></script>
  <style>
    body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; padding: 1rem; }
    #output { white-space: pre-wrap; border: 1px solid #ddd; padding: 1rem; margin-top: 1rem; max-height: 60vh; overflow: auto; background:#fafafa;}
    button { margin-right: .5rem; }
  </style>
</head>
<body>

<h1>Spooky Ghost Game</h1>
<p>Note: This version adapts the original CLI code to run in the browser via PyScript by replacing blocking input() calls with browser prompts and using safe integer parsing. Output is printed to the page.</p>

<div id="output"></div>
<!-- The game will print to the above output element. -->

<py-config>
packages = []
</py-config>

<py-script>
# Adapted version of the provided game so it runs inside PyScript on a GitHub Pages site.
# Main changes:
# - Replaced blocking input() calls with window.prompt wrappers so user prompts work in the browser.
# - Added safe integer parsing helpers to avoid uncaught ValueError from invalid input.
# - Replaced exit() with raising SystemExit so PyScript stops execution cleanly.
# - All prints go to the document area via a small print wrapper that appends to #output.
# NOTE: This preserves the game's original flow (recursive calls to regular()). For a large-scale UI improvement,
# consider converting the game loop to event-driven UI controls (buttons, form fields).

from js import window
import random
import time as time_module
import string

# Output area helper --------------------------------------------------------
from pyodide import create_proxy
out_elem = document.getElementById("output")

def write(s=""):
    """Append text to the output element and keep it scrolled to bottom."""
    out_elem.innerText = out_elem.innerText + str(s) + ("\n" if not str(s).endswith("\n") else "")
    out_elem.scrollTop = out_elem.scrollHeight

# Replace built-in print with write
def print(*args, sep=" ", end="\n"):
    text = sep.join(str(a) for a in args) + ("" if end == "" else end)
    write(text)

# Browser prompt wrapper (non-blocking prompt via window.prompt)
def get_input(msg="> "):
    res = window.prompt(msg)
    if res is None:
        return ""      # User cancelled -> treat as empty string
    return res.strip()

def get_int(msg="> ", default=0):
    """Prompt the user until a valid integer is entered, or return default if cancelled/empty."""
    while True:
        res = get_input(msg)
        if res == "":
            return default
        try:
            return int(res)
        except:
            print("Please enter a valid number.")

# End helpers ---------------------------------------------------------------

booleanThing = ["yes", "no"]

#This randomizes basically everything that needs to be randomized. It also returns important info if you call it with the right parameters. USE THIS INSTEAD OF GLOBAL, it will save so much time in the future.
def randomPicker9000(randomy):
    global ghost, ghostRoom, weather, cursedItem, ghostName, hidingPlaces
    if randomy == True:
        ghostRoom = rooms[random.randint(0, len(rooms) - 1)]
        ghost = ghosts[random.randint(0, len(ghosts) - 1)][0]
        weather = weathers[random.randint(0, len(weathers) - 1)]
        cursedItem = cursedItems[random.randint(0, len(cursedItems) - 1)]
        ghostName = firstNames[random.randint(0, len(firstNames) - 1)] +
î€€
